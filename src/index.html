<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="format-detection" content="telephone=no" />
    <title>–ì–æ—Å—É—Å–ª—É–≥–∏ ¬∑ –û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ –∏–∑ Telegram</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- API Server Configuration - –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∑ config.js (—è–∫—â–æ —ñ—Å–Ω—É—î) -->
    <script src="/config.js" onerror="console.log('config.js not found, using defaults')"></script>
    <style>
      :root {
        font-family: "PT Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        color: #181f2f;
        background-color: #f3f6fb;
        font-size: 16px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 0;
        background: #f3f6fb;
        color: #181f2f;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        /* Safe area –¥–ª—è Telegram WebView */
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
      }

      header {
        background: #ffffff;
        border-bottom: 1px solid #e2e8f0;
        padding: 0 32px;
        position: sticky;
        top: 0;
        z-index: 100;
        /* Safe area –¥–ª—è Telegram WebView */
        padding-top: max(0px, env(safe-area-inset-top));
        padding-left: max(32px, calc(32px + env(safe-area-inset-left)));
        padding-right: max(32px, calc(32px + env(safe-area-inset-right)));
      }

      .topbar {
        max-width: 1280px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 72px;
      }

      .logo {
        font-weight: 700;
        font-size: 24px;
      }

      .logo span:first-child {
        color: #e30016;
      }

      .logo span:last-child {
        color: #0b63ce;
      }

      nav {
        display: flex;
        gap: 24px;
        font-size: 15px;
        color: #4a566b;
      }

      .hero {
        background: linear-gradient(115deg, #f7fbff 0%, #eef3ff 60%, #fff4f4 100%);
        padding: 56px 32px 80px;
      }

      .hero-inner {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 48px;
        align-items: center;
      }

      .hero h1 {
        margin: 0 0 16px;
        font-size: clamp(32px, 4vw, 48px);
        font-weight: 700;
      }

      .hero p {
        margin: 0;
        color: #56607a;
        font-size: 18px;
        line-height: 1.6;
      }

      .hero-actions {
        margin-top: 32px;
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }

      .primary-btn,
      .secondary-btn {
        padding: 14px 24px;
        border-radius: 999px;
        border: none;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
      }

      .primary-btn {
        background: #0b63ce;
        color: #fff;
        box-shadow: 0 10px 20px rgba(11, 99, 206, 0.2);
      }

      .secondary-btn {
        background: transparent;
        color: #0b63ce;
        border: 1px solid rgba(11, 99, 206, 0.2);
      }

      .stats {
        margin-top: 32px;
        display: flex;
        gap: 24px;
        flex-wrap: wrap;
      }

      .stat strong {
        display: block;
        font-size: 28px;
      }

      main {
        max-width: 1200px;
        margin: -48px auto 80px;
        padding: 0 32px;
        display: grid;
        gap: 32px;
      }

      .order-overview {
        background: #fff;
        border-radius: 24px;
        padding: 32px;
        box-shadow:
          0 20px 40px rgba(15, 23, 42, 0.05),
          0 0 1px rgba(15, 23, 42, 0.08);
        display: grid;
        gap: 32px;
      }

      .order-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 16px;
      }

      .order-card {
        border: 1px solid #e8edf5;
        border-radius: 18px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 6px;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .order-card:hover {
        border-color: #0b63ce;
        box-shadow: 0 8px 20px rgba(11, 99, 206, 0.1);
        transform: translateY(-2px);
      }

      .order-card span {
        color: #6b7287;
        font-size: 14px;
      }

      .order-card strong {
        font-size: 18px;
      }

      .status-timeline {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }

      .status-step {
        flex: 1 1 180px;
        padding: 16px;
        border-radius: 16px;
        border: 1px dashed #cfd8ea;
        position: relative;
      }

      .status-step.active {
        border-style: solid;
        border-color: #0b63ce;
        box-shadow: 0 12px 24px rgba(11, 99, 206, 0.12);
      }

      .status-step strong {
        display: block;
        margin-bottom: 6px;
      }

      .delivery-flow {
        border: 1px solid #e8edf5;
        border-radius: 20px;
        padding: 24px;
        display: grid;
        gap: 12px;
      }

      .delivery-flow h3 {
        margin: 0;
        font-size: 20px;
      }

      .delivery-flow ol {
        margin: 0;
        padding-left: 20px;
        color: #4b5567;
        line-height: 1.5;
      }

      .payment-wrapper {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 32px;
      }

      .payment-info,
      .payment-module {
        background: #fff;
        border-radius: 24px;
        padding: 32px;
        box-shadow:
          0 20px 40px rgba(15, 23, 42, 0.05),
          0 0 1px rgba(15, 23, 42, 0.08);
      }

      .payment-info h3 {
        margin: 0 0 16px;
        font-size: 24px;
      }

      .payment-info ul {
        margin: 0;
        padding-left: 18px;
        color: #5b6378;
        line-height: 1.5;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 14px;
        border-radius: 999px;
        background: rgba(11, 99, 206, 0.08);
        color: #0b63ce;
        font-size: 14px;
        transition: all 0.3s ease;
        cursor: default;
      }

      .badge:hover {
        background: rgba(11, 99, 206, 0.15);
        transform: scale(1.05);
      }

      .module-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 24px;
        gap: 16px;
      }

      .tab-group {
        display: inline-flex;
        border: 1px solid #d7deeb;
        border-radius: 999px;
        overflow: hidden;
      }

      .tab {
        padding: 8px 16px;
        font-size: 14px;
        border: none;
        background: transparent;
        cursor: pointer;
      }

      .tab.active {
        background: #0b63ce;
        color: #fff;
      }

      .plans {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }

      .plan-card {
        flex: 1 1 140px;
        border: 1px solid #e8edf5;
        border-radius: 18px;
        padding: 18px;
        cursor: pointer;
        transition: border-color 0.2s, transform 0.2s, box-shadow 0.2s;
      }

      .plan-card.active {
        border-color: #e30016;
        box-shadow: 0 12px 24px rgba(227, 0, 22, 0.15);
        transform: translateY(-2px);
      }

      .plan-title {
        font-weight: 600;
        margin-bottom: 6px;
      }

      .plan-desc {
        color: #6b7287;
        font-size: 14px;
      }

      .plan-price {
        font-size: 24px;
        font-weight: 700;
        margin-top: 12px;
      }

      .methods {
        margin-top: 24px;
        display: grid;
        gap: 12px;
      }

      .method {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        border: 1px solid #e8edf5;
        border-radius: 16px;
        cursor: pointer;
        transition: border-color 0.2s, box-shadow 0.2s;
      }

      .method.active {
        border-color: #0b63ce;
        box-shadow: 0 12px 24px rgba(11, 99, 206, 0.12);
      }

      .method-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: #eef4ff;
        display: grid;
        place-items: center;
        font-weight: 600;
        color: #0b63ce;
        font-size: 22px;
      }

      .summary {
        margin-top: 32px;
        padding: 20px;
        border-radius: 18px;
        background: linear-gradient(135deg, rgba(11, 99, 206, 0.08), rgba(227, 0, 22, 0.08));
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .summary-row {
        display: flex;
        justify-content: space-between;
        color: #3f4657;
      }

      .summary-row strong {
        font-size: 20px;
      }

      .instruction {
        font-size: 14px;
        color: #2f374a;
      }

      .cta {
        margin-top: 16px;
        padding: 16px;
        border-radius: 18px;
        border: none;
        font-size: 17px;
        font-weight: 600;
        background: linear-gradient(120deg, #e30016, #0b63ce);
        color: #fff;
        cursor: pointer;
        transition: opacity 0.2s, transform 0.2s;
      }

      .cta:hover {
        opacity: 0.94;
        transform: translateY(-1px);
      }

      footer {
        padding: 32px;
        text-align: center;
        color: #848ca3;
        font-size: 14px;
      }

      /* Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.6;
        }
      }

      @keyframes slideIn {
        from {
          transform: translateX(-20px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes shimmer {
        0% {
          background-position: -1000px 0;
        }
        100% {
          background-position: 1000px 0;
        }
      }

      @keyframes bounce {
        0%, 100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .fade-in {
        animation: fadeInUp 0.6s ease-out;
      }

      .order-card {
        animation: fadeInUp 0.5s ease-out;
        animation-fill-mode: both;
      }

      .order-card:nth-child(1) {
        animation-delay: 0.1s;
      }
      .order-card:nth-child(2) {
        animation-delay: 0.2s;
      }
      .order-card:nth-child(3) {
        animation-delay: 0.3s;
      }
      .order-card:nth-child(4) {
        animation-delay: 0.4s;
      }
      .order-card:nth-child(5) {
        animation-delay: 0.5s;
      }
      .order-card:nth-child(6) {
        animation-delay: 0.6s;
      }

      .status-step {
        transition: all 0.3s ease;
      }

      .status-step.active::before {
        content: "‚úì";
        position: absolute;
        top: -8px;
        right: -8px;
        width: 24px;
        height: 24px;
        background: #0ab844;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: bold;
        animation: bounce 0.5s ease;
      }

      .status-step.active {
        animation: slideIn 0.4s ease;
      }

      .plan-card:hover {
        transform: translateY(-4px) scale(1.02);
      }

      .method:hover {
        transform: translateX(4px);
      }

      .stat strong {
        animation: fadeInUp 0.6s ease-out;
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      /* Progress bar */
      .progress-container {
        margin-top: 16px;
        height: 6px;
        background: #e8edf5;
        border-radius: 10px;
        overflow: hidden;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #0b63ce, #0ab844);
        border-radius: 10px;
        transition: width 0.6s ease;
        animation: shimmer 2s infinite;
        background-size: 200% 100%;
      }

      /* Toast notification */
      .toast {
        position: fixed;
        bottom: 24px;
        right: 24px;
        background: #fff;
        padding: 16px 20px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        display: none;
        align-items: center;
        gap: 12px;
        z-index: 1000;
        animation: slideIn 0.3s ease;
        max-width: 320px;
      }

      .toast.show {
        display: flex;
      }

      .toast-icon {
        font-size: 24px;
      }

      .toast.success {
        border-left: 4px solid #0ab844;
      }

      .toast.info {
        border-left: 4px solid #0b63ce;
      }

      /* Loading spinner */
      .spinner {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .cta.loading {
        pointer-events: none;
        opacity: 0.7;
      }

      /* Live stats counter */
      .stat-counter {
        display: inline-block;
        transition: transform 0.3s;
      }

      .stat-counter.updated {
        transform: scale(1.2);
        color: #0b63ce;
      }

      /* Status badge animation */
      .order-card strong#orderStatus {
        position: relative;
        display: inline-block;
      }

      .order-card strong#orderStatus.updating::after {
        content: "";
        position: absolute;
        right: -20px;
        top: 50%;
        transform: translateY(-50%);
        width: 12px;
        height: 12px;
        border: 2px solid #0b63ce;
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }

      /* Interactive timeline connector */
      .status-timeline::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 2px;
        background: #e8edf5;
        z-index: 0;
      }

      .status-step {
        position: relative;
        z-index: 1;
      }

      /* Hover effects */
      nav span {
        cursor: pointer;
        transition: color 0.2s;
        position: relative;
      }

      nav span:hover {
        color: #0b63ce;
      }

      nav span::after {
        content: "";
        position: absolute;
        bottom: -4px;
        left: 0;
        width: 0;
        height: 2px;
        background: #0b63ce;
        transition: width 0.3s;
      }

      nav span:hover::after {
        width: 100%;
      }

      .primary-btn:hover,
      .secondary-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 24px rgba(11, 99, 206, 0.25);
      }

      .primary-btn:active,
      .secondary-btn:active {
        transform: translateY(0);
      }

      /* Badge pulse */
      .badge.pulse {
        animation: pulse 2s infinite;
      }

      /* Delivery flow animation */
      .delivery-flow ol li {
        opacity: 0;
        animation: fadeInUp 0.5s ease-out forwards;
      }

      .delivery-flow ol li:nth-child(1) {
        animation-delay: 0.1s;
      }
      .delivery-flow ol li:nth-child(2) {
        animation-delay: 0.3s;
      }
      .delivery-flow ol li:nth-child(3) {
        animation-delay: 0.5s;
      }

      /* Login Modal */
      .login-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        z-index: 10000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(4px);
      }

      .login-modal.show {
        display: flex;
        animation: fadeIn 0.3s ease;
      }

      .login-modal-content {
        background: #fff;
        border-radius: 20px;
        padding: 40px;
        max-width: 420px;
        width: 90%;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        position: relative;
      }

      .login-modal-content h2 {
        margin: 0 0 8px;
        font-size: 24px;
        text-align: center;
        color: #181f2f;
      }

      .login-modal-content p {
        margin: 0 0 24px;
        color: #6b7287;
        text-align: center;
        font-size: 14px;
      }

      .login-form-group {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-bottom: 20px;
      }

      .login-form-group input {
        padding: 14px;
        border: 1px solid #e8edf5;
        border-radius: 10px;
        font-size: 15px;
        font-family: inherit;
        transition: border-color 0.2s;
      }

      .login-form-group input:focus {
        outline: none;
        border-color: #0b63ce;
        box-shadow: 0 0 0 3px rgba(11, 99, 206, 0.1);
      }

      .login-error {
        color: #e30016;
        font-size: 13px;
        margin-top: -12px;
        display: none;
      }

      .login-error.show {
        display: block;
      }

      .login-modal-close {
        position: absolute;
        top: 16px;
        right: 16px;
        background: transparent;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #6b7287;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s;
      }

      .login-modal-close:hover {
        background: #f3f6fb;
        color: #181f2f;
      }

      @media (max-width: 720px) {
        header {
          padding: 0 max(20px, calc(20px + env(safe-area-inset-left)));
          padding-right: max(20px, calc(20px + env(safe-area-inset-right)));
          padding-top: max(0px, env(safe-area-inset-top));
        }

        nav {
          display: none;
        }

        .hero {
          padding: 40px max(20px, calc(20px + env(safe-area-inset-left))) 68px;
          padding-right: max(20px, calc(20px + env(safe-area-inset-right)));
        }

        main {
          margin: -40px auto 64px;
          padding: 0 max(20px, calc(20px + env(safe-area-inset-left)));
          padding-right: max(20px, calc(20px + env(safe-area-inset-right)));
        }

        .status-timeline {
          flex-direction: column;
        }

        .toast {
          right: max(20px, calc(20px + env(safe-area-inset-right)));
          bottom: max(20px, calc(20px + env(safe-area-inset-bottom)));
          left: max(20px, calc(20px + env(safe-area-inset-left)));
          max-width: none;
        }
      }

      /* –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è Telegram WebView */
      html {
        -webkit-text-size-adjust: 100%;
        -webkit-tap-highlight-color: transparent;
      }

      /* –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è input –≤ Telegram */
      input, textarea, select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        font-size: 16px; /* –ó–∞–ø–æ–±—ñ–≥–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–º—É –∑–±—ñ–ª—å—à–µ–Ω–Ω—é –Ω–∞ iOS */
      }

      /* –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ Telegram */
      button {
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }

      /* –ü–ª–∞–≤–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
      * {
        -webkit-overflow-scrolling: touch;
      }

      /* –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ –¥–ª—è Telegram WebView */
      body.telegram-webview {
        /* –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ –ø—Ä–æ–±–ª–µ–º–∞–º –∑ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ—é */
        position: relative;
        min-height: 100vh;
        min-height: -webkit-fill-available;
      }

      body.telegram-webview header {
        /* –§—ñ–∫—Å–æ–≤–∞–Ω–∏–π header –≤ Telegram */
        position: sticky;
        top: 0;
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.95);
      }

      /* –ë–ª–æ–∫ –≤–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞ */
      .order-input-container {
        margin: 24px 0;
        padding: 20px;
        background: #f0f6fa;
        border-radius: 8px;
        border: 1px solid #e2e6ee;
        width: 100%;
        box-sizing: border-box;
      }

      .order-input-container label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #002a54;
        font-size: 15px;
      }

      .order-input-wrapper {
        display: flex;
        gap: 8px;
        width: 100%;
        flex-wrap: nowrap;
        align-items: stretch;
      }

      .order-input-wrapper input {
        flex: 1;
        min-width: 0;
        padding: 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 16px;
        font-family: inherit;
        background: #fff;
        color: #181f2f;
        box-sizing: border-box;
        min-height: 44px; /* –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è */
        width: 100%;
      }

      .order-input-wrapper input:focus {
        outline: none;
        border-color: #0b63ce;
        box-shadow: 0 0 0 3px rgba(11, 99, 206, 0.1);
      }

      .order-load-btn {
        padding: 12px 20px !important;
        white-space: nowrap;
        flex-shrink: 0;
        min-width: fit-content;
        font-size: 15px;
        min-height: 44px; /* –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è */
      }

      .order-error {
        margin-top: 8px;
        color: #dc2626;
        font-size: 14px;
        display: none;
        word-wrap: break-word;
        line-height: 1.4;
      }

      .order-error.show {
        display: block;
      }

      /* –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ –≤ Telegram */
      @media (max-width: 720px) {
        body.telegram-webview .hero {
          padding-top: 32px;
        }

        body.telegram-webview main {
          padding-bottom: max(64px, calc(64px + env(safe-area-inset-bottom)));
        }

        .order-input-container {
          padding: 16px;
          margin: 20px 0;
        }

        .order-input-wrapper {
          flex-direction: column;
          gap: 12px;
        }

        .order-input-wrapper input {
          width: 100%;
          padding: 14px;
        }

        .order-load-btn {
          width: 100%;
          padding: 14px 20px !important;
        }

        .order-input-container label {
          font-size: 14px;
        }
      }

      /* –î–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è –¥—É–∂–µ –º–∞–ª–∏—Ö –µ–∫—Ä–∞–Ω—ñ–≤ */
      @media (max-width: 400px) {
        .order-input-container {
          padding: 14px;
        }

        .order-input-wrapper input,
        .order-load-btn {
          font-size: 15px;
        }
      }

      /* –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤ Telegram WebView */
      body.telegram-webview {
        overscroll-behavior: contain;
      }
    </style>
</head>
<body>
    <header>
      <div class="topbar">
        <div class="logo"><span>–ì–æ—Å</span><span>—É—Å–ª—É–≥–∏</span></div>
        <nav>
          <span>–ö–∞—Ç–∞–ª–æ–≥</span>
          <span>–ó–∞–∫–∞–∑—ã</span>
          <span>–û–ø–ª–∞—Ç–∞</span>
          <span>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π</span>
        </nav>
        <div style="display: flex; gap: 12px; align-items: center;">
        </div>
      </div>
    </header>

    <section class="hero">
      <div class="hero-inner">
        <div>
          <div class="badge">–û–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –ì–æ—Å—É—Å–ª—É–≥–∏</div>
          <h1>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —Ç–æ–≤–∞—Ä–∞ –∏–∑ Telegram-–∫–∞–Ω–∞–ª–∞.</h1>
          <p>
            –ú—ã –æ—Ñ–æ—Ä–º–∏–ª–∏ –∑–∞—è–≤–∫—É –≤ —Å—Ç–∏–ª–µ –ì–æ—Å—É—Å–ª—É–≥: –∑–∞–∫–∞–∑ –∏–∑ Telegram-–∫–∞–Ω–∞–ª–∞ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤
            –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç, –≥–¥–µ –æ–ø–ª–∞—Ç–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è, —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –∞ –∫–≤–∏—Ç–∞–Ω—Ü–∏—è
            –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º –≤ –≤–∞—à–µ–º —á–∞—Ç–µ.
          </p>
          <div class="order-input-container">
            <label>–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</label>
            <div class="order-input-wrapper">
              <input 
                type="text" 
                id="orderNumberInput" 
                placeholder="TG-XXXXX" 
                onkeypress="if(event.key==='Enter') loadOrderData()"
              />
              <button 
                class="primary-btn order-load-btn" 
                onclick="loadOrderData()"
              >
                –ó–∞–≥—Ä—É–∑–∏—Ç—å
              </button>
            </div>
            <div id="orderError" class="order-error"></div>
          </div>
          <div class="hero-actions">
            <button class="primary-btn">–ü–µ—Ä–µ–π—Ç–∏ –≤ Telegram</button>
            <button class="secondary-btn">–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</button>
          </div>
          <div class="stats">
            <div class="stat">
              <strong>24/7</strong>
              –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–∏—Ç–∞–Ω—Ü–∏–π
            </div>
            <div class="stat">
              <strong>3 –º–∏–Ω</strong>
              —Å—Ä–µ–¥–Ω–µ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
            </div>
            <div class="stat">
              <strong>9 500+</strong>
              –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
            </div>
          </div>
        </div>
        <div class="order-card" style="box-shadow: 0 20px 40px rgba(12, 44, 78, 0.15);">
          <span>–ó–∞—è–≤–∫–∞ ‚Ññ TG-28451</span>
          <strong>–¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª ¬´–®–¢–û–†–ú | –¢–æ–≤–∞—Ä—ã –¥–ª—è –°–í–û¬ª</strong>
          <span>–¢–æ–≤–∞—Ä: –°–º–∞—Ä—Ç-—á–∞—Å—ã ¬∑ –î–æ—Å—Ç–∞–≤–∫–∞: –ö–∞—Ä–≥–æ ‚Üí –ú–æ—Å–∫–≤–∞ ‚Üí –°–î–≠–ö</span>
          <div style="margin-top: 8px; display: flex; align-items: center; gap: 8px;">
            <div class="badge" style="background: rgba(10, 184, 68, 0.12); color: #0ab844">
              –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞
            </div>
          </div>
        </div>
      </div>
    </section>

    <main>
      <section class="order-overview">
        <div>
          <div class="badge">–®–∞–≥ 1 ¬∑ –ó–∞—è–≤–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞</div>
          <h2 style="margin: 12px 0 0; font-size: 28px">–î–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã</h2>
        </div>

        <div class="order-grid">
          <div class="order-card">
            <span>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</span>
            <strong id="orderNumberDisplay">#TG-28451</strong>
          </div>
          <div class="order-card">
            <span>–ö–∞–Ω–∞–ª –ø—Ä–æ–¥–∞–∂–∏</span>
            <strong id="channelNameDisplay">@shtorm_svo</strong>
          </div>
          <div class="order-card">
            <span>–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞</span>
            <strong id="orderCompositionDisplay">–°–º–∞—Ä—Ç-—á–∞—Å—ã ¬∑ —Ä–µ–º–µ—à–æ–∫ ¬∑ –≥–∞—Ä–∞–Ω—Ç–∏—è</strong>
          </div>
          <div class="order-card">
            <span>–ü–æ–ª—É—á–∞—Ç–µ–ª—å</span>
            <strong id="recipientNameDisplay">–ê–Ω–¥—Ä–µ–π –ö–æ–≤–∞–ª–µ–Ω–∫–æ</strong>
          </div>
          <div class="order-card">
            <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
            <strong id="deliveryAddressDisplay">–ö–∞—Ä–≥–æ: –¥–æ –ú–æ—Å–∫–≤—ã ¬∑ –°–î–≠–ö –¥–æ –¥–≤–µ—Ä–∏</strong>
          </div>
          <div class="order-card">
            <span>–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å</span>
            <strong id="orderStatus">–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã</strong>
          </div>
        </div>

        <div class="status-timeline">
          <div class="status-step active" data-step="1">
            <strong>1. –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞</strong>
            <span>–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–µ—Ä–µ–Ω—ë—Å –∑–∞–∫–∞–∑ –∏–∑ Telegram –≤ –ì–æ—Å—É—Å–ª—É–≥–∏.</span>
          </div>
          <div class="status-step" data-step="2">
            <strong>2. –û–ø–ª–∞—Ç–∞ –æ–∂–∏–¥–∞–µ—Ç—Å—è</strong>
            <span>–û–ø–ª–∞—Ç–∏—Ç–µ –∑–∞–∫–∞–∑ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –æ–ø–µ—Ä–∞—Ç–æ—Ä—É.</span>
          </div>
          <div class="status-step" data-step="3">
            <strong>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏</strong>
            <span>–û–ø–µ—Ä–∞—Ç–æ—Ä –≤ Telegram –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç —É—Å–ø–µ—Ö –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –æ—Ç–ø—Ä–∞–≤–∫—É.</span>
          </div>
        </div>

        <div class="delivery-flow">
          <h3>–õ–æ–≥–∏–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–∞—Ä–≥–æ + –°–î–≠–ö</h3>
          <ol>
            <li>–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä –∑–∞–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è –∑–∞ –≤–∞—à–∏–º –∑–∞–∫–∞–∑–æ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞—Ä–≥–æ-—Ä–µ–π—Å–æ–º –¥–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ —Å–∫–ª–∞–¥–∞ –ø—Ä–∏—ë–º–∫–∏.</li>
            <li>–ù–∞ –º–æ—Å–∫–æ–≤—Å–∫–æ–º —Å–∫–ª–∞–¥–µ –∑–∞–∫–∞–∑ –ø–µ—Ä–µ–æ—Ñ–æ—Ä–º–ª—è—é—Ç, —É—Ç–æ—á–Ω—è—é—Ç –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Å–æ–∑–¥–∞—é—Ç –Ω–∞–∫–ª–∞–¥–Ω—É—é –°–î–≠–ö.</li>
            <li>–°–î–≠–ö –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Å—ã–ª–∫—É –Ω–∞ –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∫–∞–∑–∞–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É –≤ Telegram, —Å —Ç—Ä–µ–∫–∏–Ω–≥–æ–º –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.</li>
          </ol>
        </div>
      </section>

      <section class="payment-wrapper">
        <article class="payment-info">
          <div class="badge">–®–∞–≥ 2 ¬∑ –û–ø–ª–∞—Ç–∞</div>
          <h3>–û–ø–ª–∞—Ç–∏—Ç–µ —Ç–æ–≤–∞—Ä –ø—Ä–∏–≤—ã—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º</h3>
          <p style="color: #5b6378">
            –ú—ã —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤–∞—à –ø–ª–∞—Ç—ë–∂ –∫–∞–∫ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—É—é —É—Å–ª—É–≥—É: —Å—É–º–º–∞, –∫–≤–∏—Ç–∞–Ω—Ü–∏—è –∏ —Å—Ç–∞—Ç—É—Å
            —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Telegram-–∫–∞–Ω–∞–ª–æ–º.
          </p>
          <ul>
            <li>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ (—Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞) –∏ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã.</li>
            <li>–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–ª—É—á–∏—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –≤ PDF/—Å–∫—Ä–∏–Ω—à–æ—Ç–µ.</li>
            <li>
              –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –æ–ø–µ—Ä–∞—Ç–æ—Ä—É –≤ Telegram: <strong>@gosuslugi_support_bot</strong>.
            </li>
            <li>–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —á–∞—Ç–µ –ø–æ—è–≤–∏—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ¬´–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞¬ª –∏ –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏.</li>
            <li>–ù–∞ —ç—Ç–∞–ø–µ –∫–∞—Ä–≥–æ-–æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä —É—Ç–æ—á–Ω–∏—Ç –∞–¥—Ä–µ—Å –≤ –ú–æ—Å–∫–≤–µ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –°–î–≠–ö.</li>
          </ul>
        </article>

        <article class="payment-module">
          <div class="module-header">
            <div>
              <h3 style="margin: 0">–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ TG-28451</h3>
              <span style="color: #6b7287; font-size: 14px">–≠—Ç–∞–ø 2 –∏–∑ 3 ‚Äî –ø–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</span>
            </div>
            <div class="tab-group">
              <button class="tab active">–ß–∞—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ</button>
              <button class="tab">–ë–∏–∑–Ω–µ—Å</button>
            </div>
          </div>

          <div class="plans" id="planList">
            <article class="plan-card active" data-plan="basic" data-amount="4900">
              <div class="plan-title">–û—Å–Ω–æ–≤–Ω–æ–π —Å—á—ë—Ç</div>
              <div class="plan-desc">–¢–æ–≤–∞—Ä + –±–∞–∑–æ–≤–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</div>
              <div class="plan-price">4 900 ‚ÇΩ</div>
            </article>
            <article class="plan-card" data-plan="pro" data-amount="6200">
              <div class="plan-title">–ü—Ä–µ–º–∏—É–º –ø–∞–∫–µ—Ç</div>
              <div class="plan-desc">–¢–æ–≤–∞—Ä + —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞</div>
              <div class="plan-price">6 200 ‚ÇΩ</div>
            </article>
            <article class="plan-card" data-plan="vip" data-amount="7900">
              <div class="plan-title">VIP —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ</div>
              <div class="plan-desc">–¢–æ–≤–∞—Ä + —ç–∫—Å–ø—Ä–µ—Å—Å –¥–æ—Å—Ç–∞–≤–∫–∞</div>
              <div class="plan-price">7 900 ‚ÇΩ</div>
            </article>
          </div>

          <div class="methods" id="methodList">
            <div class="method active" data-method="card">
              <div class="method-icon">üí≥</div>
              <div>
                <div class="plan-title">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</div>
                <div class="plan-desc">Visa / Mastercard / –ú–ò–†</div>
              </div>
            </div>
            <div class="method" data-method="sbp">
              <div class="method-icon">‚ÇΩ</div>
              <div>
                <div class="plan-title">–°–ë–ü</div>
                <div class="plan-desc">–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ QR</div>
              </div>
            </div>
            <div class="method" data-method="govpay">
              <div class="method-icon">üèõÔ∏è</div>
              <div>
                <div class="plan-title">–ì–æ—Å–∫–æ—à–µ–ª—ë–∫</div>
                <div class="plan-desc">–û–ø–ª–∞—Ç–∞ —Å –±–∞–ª–∞–Ω—Å–∞ –ì–æ—Å—É—Å–ª—É–≥</div>
              </div>
            </div>
          </div>

          <div class="summary" id="summary">
            <div class="progress-container" style="display: none;">
              <div class="progress-bar" style="width: 33%"></div>
            </div>
            <div class="summary-row">
              <span>–í—ã–±—Ä–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç</span>
              <span id="summaryPlan">–û—Å–Ω–æ–≤–Ω–æ–π —Å—á—ë—Ç</span>
            </div>
            <div class="summary-row">
              <span>–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã</span>
              <span id="summaryMethod">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</span>
            </div>
            <div class="summary-row">
              <span>–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ</span>
              <strong id="summaryAmount">4 900 ‚ÇΩ</strong>
            </div>
            <p class="instruction" id="receiptNote">
              –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –≤ —á–∞—Ç Telegram: @gosuslugi_support_bot.
            </p>
            <button class="cta" id="payButton">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫ –æ–ø–ª–∞—Ç–µ</button>
          </div>
        </article>
      </section>
    </main>

    <footer>
      ¬© 2025 –ì–æ—Å—É—Å–ª—É–≥–∏ ¬∑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram-–∫–∞–Ω–∞–ª–∞–º–∏ ¬∑ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ ¬∑ –ü–æ–ª–∏—Ç–∏–∫–∞
      –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
    </footer>

    <!-- Toast notification -->
    <div class="toast" id="toast">
      <span class="toast-icon" id="toastIcon">‚úÖ</span>
      <span id="toastMessage">–°–æ–æ–±—â–µ–Ω–∏–µ</span>
    </div>

    <script>
      // Toast notification system
      function showToast(message, type = "success") {
        const toast = document.getElementById("toast");
        const toastIcon = document.getElementById("toastIcon");
        const toastMessage = document.getElementById("toastMessage");

        toast.className = `toast ${type}`;
        toastMessage.textContent = message;

        const icons = {
          success: "‚úÖ",
          info: "‚ÑπÔ∏è",
          warning: "‚ö†Ô∏è",
          error: "‚ùå",
        };

        toastIcon.textContent = icons[type] || icons.success;
        toast.classList.add("show");

        setTimeout(() => {
          toast.classList.remove("show");
        }, 4000);
      }

      // Animated counter
      function animateCounter(element, target, duration = 2000) {
        const start = parseInt(element.textContent.replace(/\D/g, "")) || 0;
        const increment = target / (duration / 16);
        let current = start;

        const timer = setInterval(() => {
          current += increment;
          if (current >= target) {
            element.textContent = formatNumber(target);
            element.classList.add("updated");
            setTimeout(() => element.classList.remove("updated"), 500);
            clearInterval(timer);
          } else {
            element.textContent = formatNumber(Math.floor(current));
          }
        }, 16);
      }

      function formatNumber(num) {
        if (num >= 1000000) {
          return (num / 1000000).toFixed(1) + " –º–ª–Ω";
        }
        if (num >= 1000) {
          return (num / 1000).toFixed(0) + " —Ç—ã—Å";
        }
        return num.toString();
      }

      // Progress bar
      function updateProgress(percent) {
        const summary = document.getElementById("summary");
        const progressBar = summary?.querySelector(".progress-bar");
        if (progressBar) {
          progressBar.style.width = percent + "%";
        }
      }

      // API base URL - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â
      // –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤–∞—à API —Å–µ—Ä–≤–µ—Ä URL —Ç—É—Ç –∞–±–æ —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—É
      const API_SERVER_URL = window.API_SERVER_URL || null; // –ú–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —á–µ—Ä–µ–∑ <script> —Ç–µ–≥
      
      const API_BASE_URL = (() => {
        // –Ø–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —è–≤–Ω–∏–π API_SERVER_URL, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –π–æ–≥–æ
        if (API_SERVER_URL) {
          return API_SERVER_URL.endsWith('/api') ? API_SERVER_URL : `${API_SERVER_URL}/api`;
        }
        
        // –û—Ç—Ä–∏–º—É—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π origin
        let currentOrigin = window.location.origin;
        
        // –Ø–∫—â–æ origin –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ (Telegram WebView –∞–±–æ file://), –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ localhost
        if (!currentOrigin || currentOrigin === 'null' || currentOrigin === 'file://' || window.location.protocol === 'file:') {
          return 'http://localhost:3000/api';
        }
        
        // –Ø–∫—â–æ –Ω–∞ localhost –∞–±–æ 127.0.0.1, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ localhost:3000
        if (currentOrigin.includes('localhost') || currentOrigin.includes('127.0.0.1')) {
          return 'http://localhost:3000/api';
        }
        
        // –î–ª—è Firebase Hosting (web.app) - –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ –æ–∫—Ä–µ–º–∏–π API —Å–µ—Ä–≤–µ—Ä
        if (currentOrigin.includes('web.app') || currentOrigin.includes('firebaseapp.com')) {
          // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ API_SERVER_URL —á–µ—Ä–µ–∑ config.js
          if (window.API_SERVER_URL && window.API_SERVER_URL !== null && window.API_SERVER_URL !== 'null') {
            return window.API_SERVER_URL.endsWith('/api') 
              ? window.API_SERVER_URL 
              : `${window.API_SERVER_URL}/api`;
          }
          // –Ø–∫—â–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–ª—è Firebase, –ø–æ–∫–∞–∑—É—î–º–æ –ø–æ–º–∏–ª–∫—É
          console.error('‚ùå API —Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–ª—è Firebase Hosting!');
          console.error('üìù –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å window.API_SERVER_URL –≤ src/config.js');
          console.error('üí° –ü—Ä–∏–∫–ª–∞–¥: window.API_SERVER_URL = "https://your-app.railway.app";');
          // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ null, —â–æ–± –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
          return null;
        }
        
        // –Ü–Ω–∞–∫—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π –¥–æ–º–µ–Ω (—è–∫—â–æ API –Ω–∞ —Ç–æ–º—É –∂ –¥–æ–º–µ–Ω—ñ)
        return `${currentOrigin}/api`;
      })();
      
      // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ API - –∑–∞–≤–∂–¥–∏ –º–∞—î –±—É—Ç–∏ –≤–∏–∑–Ω–∞—á–µ–Ω–æ
      const isAPIConfigured = API_BASE_URL !== null && API_BASE_URL !== undefined && API_BASE_URL.length > 0;
      
      // –õ–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
      console.log('üîß API Configuration:', {
        API_SERVER_URL: API_SERVER_URL,
        API_BASE_URL: API_BASE_URL,
        isAPIConfigured: isAPIConfigured,
        origin: window.location.origin,
        protocol: window.location.protocol,
        hostname: window.location.hostname,
        port: window.location.port
      });
      
      if (!isAPIConfigured) {
        console.error('‚ùå API —Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ!');
        console.error('üìù –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API_BASE_URL');
        console.error('üí° –ü–æ—Ç–æ—á–Ω–∏–π API_BASE_URL:', API_BASE_URL);
        console.error('üí° –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏: –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π (npm start)');
        console.error('üí° –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å window.API_SERVER_URL –≤ src/config.js');
      } else {
        console.log('‚úÖ API —Å–µ—Ä–≤–µ—Ä –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:', API_BASE_URL);
      }
      
      // –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É (Firebase)
      if (window.location.origin.includes('web.app') || window.location.origin.includes('firebaseapp.com')) {
        if (!API_SERVER_URL) {
          console.warn('‚ö†Ô∏è API —Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!');
          console.warn('üìù –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å window.API_SERVER_URL –≤ src/config.js');
          console.warn('üí° –ü—Ä–∏–∫–ª–∞–¥: window.API_SERVER_URL = "https://your-api-server.railway.app";');
        }
      }

      // Load order data from API (global function)
      window.loadOrderData = async function loadOrderData() {
        const orderNumberInput = document.getElementById("orderNumberInput");
        const orderError = document.getElementById("orderError");
        const orderNumber = orderNumberInput?.value.trim().toUpperCase();

        if (!orderNumber) {
          orderError.textContent = "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: TG-28451)";
          orderError.classList.add("show");
          return;
        }

        if (!orderNumber.match(/^TG-\d+$/)) {
          orderError.textContent = "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç: TG-XXXXX";
          orderError.classList.add("show");
          return;
        }

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API
        if (!isAPIConfigured || !API_BASE_URL) {
          orderError.textContent = `API —Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. URL: ${API_BASE_URL || '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω'}`;
          orderError.classList.add("show");
          console.error("API —Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:", {
            API_BASE_URL,
            isAPIConfigured,
            origin: window.location.origin
          });
          return;
        }

        orderError.classList.remove("show");

        // –ü–æ–∫–∞–∑–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
        const loadBtn = document.querySelector(".order-load-btn");
        const originalBtnText = loadBtn?.textContent;
        if (loadBtn) {
          loadBtn.disabled = true;
          loadBtn.textContent = "–ó–∞–≥—Ä—É–∑–∫–∞...";
          loadBtn.style.opacity = "0.7";
        }

        try {
          // –°—Ç–≤–æ—Ä—é—î–º–æ AbortController –¥–ª—è timeout
          const controller = new AbortController();
          const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 —Å–µ–∫—É–Ω–¥
          
          const response = await fetch(`${API_BASE_URL}/order/${orderNumber}`, {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json',
            },
            signal: controller.signal
          });
          
          clearTimeout(timeoutId);
          
          if (!response.ok) {
            if (response.status === 404) {
              orderError.textContent = `–ó–∞–∫–∞–∑ ${orderNumber} –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞.`;
              orderError.classList.add("show");
              if (loadBtn) {
                loadBtn.disabled = false;
                loadBtn.textContent = originalBtnText;
                loadBtn.style.opacity = "1";
              }
              return;
            }
            throw new Error(`–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${response.status}`);
          }

          const data = await response.json();
          updateOrderDisplay(data);
          orderError.classList.remove("show");
          
          // –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∫–Ω–æ–ø–∫—É
          if (loadBtn) {
            loadBtn.disabled = false;
            loadBtn.textContent = originalBtnText;
            loadBtn.style.opacity = "1";
          }
        } catch (error) {
          console.error("Error loading order:", error);
          
          // –ë—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
          let errorMessage = "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É.";
          
          if (error.name === 'AbortError') {
            errorMessage = "–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.";
          } else if (error.message && (error.message.includes('Failed to fetch') || error.message.includes('NetworkError') || error.message.includes('Network request failed'))) {
            errorMessage = "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω.";
          } else if (error.message && error.message.includes('CORS')) {
            errorMessage = "–û—à–∏–±–∫–∞ CORS. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ.";
          } else if (error.message) {
            errorMessage = error.message;
          } else {
            errorMessage = "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω.";
          }
          
          orderError.textContent = errorMessage;
          orderError.classList.add("show");
          
          // –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∫–Ω–æ–ø–∫—É
          if (loadBtn) {
            loadBtn.disabled = false;
            loadBtn.textContent = originalBtnText;
            loadBtn.style.opacity = "1";
          }
        }
      }

      // Update order display with API data
      function updateOrderDisplay(data) {
        if (!data.order) return;

        // Update hero card
        const heroCard = document.querySelector(".hero .order-card");
        if (heroCard) {
          const orderNumberEl = heroCard.querySelector("span:first-child");
          const channelEl = heroCard.querySelector("strong");
          const productEl = heroCard.querySelector("span:nth-child(3)");
          const statusBadge = heroCard.querySelector(".badge");
          if (orderNumberEl) orderNumberEl.textContent = `–ó–∞—è–≤–∫–∞ ‚Ññ ${data.order.number || "TG-28451"}`;
          if (channelEl) channelEl.textContent = `–¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª ¬´${data.order.channelDisplay || data.order.channelName || "–®–¢–û–†–ú | –¢–æ–≤–∞—Ä—ã –¥–ª—è –°–í–û"}¬ª`;
          if (productEl) productEl.textContent = `–¢–æ–≤–∞—Ä: ${data.order.productName || "–°–º–∞—Ä—Ç-—á–∞—Å—ã"} ¬∑ –î–æ—Å—Ç–∞–≤–∫–∞: ${data.order.deliveryAddress || "–ö–∞—Ä–≥–æ ‚Üí –ú–æ—Å–∫–≤–∞ ‚Üí –°–î–≠–ö"}`;
          if (statusBadge) {
            const statusText = data.order.status || "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞";
            statusBadge.textContent = `–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏: ${statusText}`;
            // –ó–º—ñ–Ω–∏—Ç–∏ –∫–æ–ª—ñ—Ä badge –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Å—Ç–∞—Ç—É—Å—É
            if (statusText.includes("–û–∂–∏–¥–∞–µ—Ç") || statusText.includes("–æ–∂–∏–¥–∞–µ—Ç")) {
              statusBadge.style.background = "rgba(255, 193, 7, 0.12)";
              statusBadge.style.color = "#ff9800";
            } else if (statusText.includes("–û–ø–ª–∞—á–µ–Ω") || statusText.includes("–æ–ø–ª–∞—á–µ–Ω")) {
              statusBadge.style.background = "rgba(10, 184, 68, 0.12)";
              statusBadge.style.color = "#0ab844";
            }
          }
        }

        // Update order overview
        const orderNumberEl = document.getElementById("orderNumberDisplay");
        const channelNameEl = document.getElementById("channelNameDisplay");
        const orderCompositionEl = document.getElementById("orderCompositionDisplay");
        const recipientNameEl = document.getElementById("recipientNameDisplay");
        const deliveryAddressEl = document.getElementById("deliveryAddressDisplay");
        const orderStatus = document.getElementById("orderStatus");

        if (orderNumberEl) orderNumberEl.textContent = `#${data.order.number || "TG-28451"}`;
        if (channelNameEl) channelNameEl.textContent = data.order.channelName || "@shtorm_svo";
        if (orderCompositionEl) {
          const composition = data.order.composition || "–°–º–∞—Ä—Ç-—á–∞—Å—ã ¬∑ —Ä–µ–º–µ—à–æ–∫ ¬∑ –≥–∞—Ä–∞–Ω—Ç–∏—è";
          orderCompositionEl.textContent = composition;
        }
        if (recipientNameEl) recipientNameEl.textContent = data.order.recipient || "–ê–Ω–¥—Ä–µ–π –ö–æ–≤–∞–ª–µ–Ω–∫–æ";
        if (deliveryAddressEl) {
          const deliveryText = data.order.deliveryAddress 
            ? `–ö–∞—Ä–≥–æ ‚Üí –ú–æ—Å–∫–≤–∞ ‚Üí –°–î–≠–ö: ${data.order.deliveryAddress}`
            : "–ö–∞—Ä–≥–æ: –¥–æ –ú–æ—Å–∫–≤—ã ¬∑ –°–î–≠–ö –¥–æ –¥–≤–µ—Ä–∏";
          deliveryAddressEl.textContent = deliveryText;
        }
        if (orderStatus) orderStatus.textContent = data.order.status || "–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã";

        // Update payment module title
        const paymentTitle = document.querySelector(".payment-module h3");
        if (paymentTitle) paymentTitle.textContent = `–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ ${data.order.number || "TG-28451"}`;
      }

      // Load data from admin panel (legacy, for backward compatibility)
      function loadAdminData() {
        const data = JSON.parse(localStorage.getItem("adminData") || "{}");
        
        if (!data || Object.keys(data).length === 0) {
          return; // No data, use defaults
        }

        // Update order data
        if (data.order) {
          // Update hero card
          const heroCard = document.querySelector(".hero .order-card");
          if (heroCard) {
            const orderNumberEl = heroCard.querySelector("span:first-child");
            const channelEl = heroCard.querySelector("strong");
            const productEl = heroCard.querySelector("span:nth-child(3)");
            if (orderNumberEl) orderNumberEl.textContent = `–ó–∞—è–≤–∫–∞ ‚Ññ ${data.order.number || "TG-28451"}`;
            if (channelEl) channelEl.textContent = `–¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª ¬´${data.order.channelDisplay || "–®–¢–û–†–ú | –¢–æ–≤–∞—Ä—ã –¥–ª—è –°–í–û"}¬ª`;
            if (productEl) productEl.textContent = `–¢–æ–≤–∞—Ä: ${data.order.productName || "–°–º–∞—Ä—Ç-—á–∞—Å—ã"} ¬∑ –î–æ—Å—Ç–∞–≤–∫–∞: –ö–∞—Ä–≥–æ ‚Üí –ú–æ—Å–∫–≤–∞ ‚Üí –°–î–≠–ö`;
          }

          // Update order overview
          const orderNumberEl = document.getElementById("orderNumberDisplay");
          const channelNameEl = document.getElementById("channelNameDisplay");
          const orderCompositionEl = document.getElementById("orderCompositionDisplay");
          const recipientNameEl = document.getElementById("recipientNameDisplay");
          const deliveryAddressEl = document.getElementById("deliveryAddressDisplay");

          if (orderNumberEl) orderNumberEl.textContent = `#${data.order.number || "TG-28451"}`;
          if (channelNameEl) channelNameEl.textContent = data.order.channelName || "@shtorm_svo";
          if (orderCompositionEl) {
            const composition = data.order.composition || "–°–º–∞—Ä—Ç-—á–∞—Å—ã ¬∑ —Ä–µ–º–µ—à–æ–∫ ¬∑ –≥–∞—Ä–∞–Ω—Ç–∏—è";
            orderCompositionEl.textContent = composition;
            // Add product description if available
            if (data.order.productDescription) {
              const descEl = document.createElement("div");
              descEl.style.cssText = "font-size: 13px; color: #6b7287; margin-top: 4px;";
              descEl.textContent = data.order.productDescription;
              orderCompositionEl.parentElement.appendChild(descEl);
            }
          }
          if (recipientNameEl) recipientNameEl.textContent = data.order.recipient || "–ê–Ω–¥—Ä–µ–π –ö–æ–≤–∞–ª–µ–Ω–∫–æ";
          if (deliveryAddressEl) {
            const deliveryText = data.order.deliveryAddress 
              ? `–ö–∞—Ä–≥–æ ‚Üí –ú–æ—Å–∫–≤–∞ ‚Üí –°–î–≠–ö: ${data.order.deliveryAddress}`
              : "–ö–∞—Ä–≥–æ: –¥–æ –ú–æ—Å–∫–≤—ã ¬∑ –°–î–≠–ö –¥–æ –¥–≤–µ—Ä–∏";
            deliveryAddressEl.textContent = deliveryText;
          }
          if (orderStatus) orderStatus.textContent = data.order.status || "–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã";

          // Update payment module title
          const paymentTitle = document.querySelector(".payment-module h3");
          if (paymentTitle) paymentTitle.textContent = `–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ ${data.order.number || "TG-28451"}`;
        }

        // Update tariffs
        if (data.tariffs && data.tariffs.length > 0) {
          const planListEl = document.getElementById("planList");
          if (planListEl) {
            planListEl.innerHTML = "";
            data.tariffs.forEach((tariff, index) => {
              const planCard = document.createElement("article");
              planCard.className = `plan-card ${index === 0 ? "active" : ""}`;
              planCard.dataset.plan = tariff.key || `plan_${index}`;
              planCard.dataset.amount = tariff.amount || "4900";
              planCard.innerHTML = `
                <div class="plan-title">${tariff.name || "–¢–∞—Ä–∏—Ñ"}</div>
                <div class="plan-desc">${tariff.desc || "–û–ø–∏—Å–∞–Ω–∏–µ"}</div>
                <div class="plan-price">${parseInt(tariff.amount || 0).toLocaleString("ru-RU")} ‚ÇΩ</div>
              `;
              planListEl.appendChild(planCard);
            });
            // Update initial selection
            if (data.tariffs[0] && summaryPlan && summaryAmount) {
              summaryPlan.textContent = data.tariffs[0].name;
              summaryAmount.textContent = currencyFormat(Number(data.tariffs[0].amount));
            }
          }
        }


        // Update Telegram bot link
        if (data.settings?.telegramBot) {
          const receiptNote = document.getElementById("receiptNote");
          if (receiptNote) {
            receiptNote.textContent = `–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –≤ —á–∞—Ç Telegram: ${data.settings.telegramBot}.`;
          }
        }
      }

      // DOM elements
      const planList = document.getElementById("planList");
      const methodList = document.getElementById("methodList");
      const summaryPlan = document.getElementById("summaryPlan");
      const summaryMethod = document.getElementById("summaryMethod");
      const summaryAmount = document.getElementById("summaryAmount");
      const payButton = document.getElementById("payButton");
      const orderStatus = document.getElementById("orderStatus");
      const receiptNote = document.getElementById("receiptNote");
      const timelineSteps = document.querySelectorAll(".status-step");
      const stats = document.querySelectorAll(".stat strong");

      let planLabels = {
        basic: "–û—Å–Ω–æ–≤–Ω–æ–π —Å—á—ë—Ç",
        pro: "–ü—Ä–µ–º–∏—É–º –ø–∞–∫–µ—Ç",
        vip: "VIP —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ",
      };

      const methodLabels = {
        card: "–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞",
        sbp: "–°–ë–ü",
        govpay: "–ì–æ—Å–∫–æ—à–µ–ª—ë–∫",
      };

      const currencyFormat = (value) =>
        new Intl.NumberFormat("ru-RU", { style: "currency", currency: "RUB" }).format(value);

      // Animate stats on load
      window.addEventListener("load", () => {
        // Check URL parameter for order number
        const urlParams = new URLSearchParams(window.location.search);
        const orderNumberFromUrl = urlParams.get("order");
        
        if (orderNumberFromUrl) {
          const orderInput = document.getElementById("orderNumberInput");
          if (orderInput) {
            orderInput.value = orderNumberFromUrl;
            loadOrderData();
          }
        } else {
          // Load admin data first (legacy)
          loadAdminData();
        }

        // Update planLabels from loaded data
        const data = JSON.parse(localStorage.getItem("adminData") || "{}");
        if (data.tariffs) {
          planLabels = {};
          data.tariffs.forEach((tariff) => {
            planLabels[tariff.key] = tariff.name;
          });
        }

        stats.forEach((stat, index) => {
          const text = stat.textContent;
          const number = parseInt(text.replace(/\D/g, ""));

          if (number) {
            setTimeout(() => {
              animateCounter(stat, number, 1500);
            }, index * 200);
          }
        });

        // Show progress bar
        const summary = document.getElementById("summary");
        const progressContainer = summary?.querySelector(".progress-container");
        if (progressContainer) {
          progressContainer.style.display = "block";
          updateProgress(33);
        }
      });

      // Plan selection with animation
      planList.addEventListener("click", (event) => {
        const target = event.target.closest(".plan-card");
        if (!target) return;

        [...planList.children].forEach((child) => child.classList.remove("active"));
        target.classList.add("active");

        const planKey = target.dataset.plan;
        const planName = planLabels[planKey] || target.querySelector(".plan-title")?.textContent || "–¢–∞—Ä–∏—Ñ";
        summaryPlan.textContent = planName;
        summaryAmount.textContent = currencyFormat(Number(target.dataset.amount));

        showToast(`–í—ã–±—Ä–∞–Ω –ø–∞–∫–µ—Ç: ${planName}`, "info");
      });

      // Method selection with animation
      methodList.addEventListener("click", (event) => {
        const target = event.target.closest(".method");
        if (!target) return;

        [...methodList.children].forEach((child) => child.classList.remove("active"));
        target.classList.add("active");

        summaryMethod.textContent = methodLabels[target.dataset.method];
        showToast(`–í—ã–±—Ä–∞–Ω —Å–ø–æ—Å–æ–±: ${methodLabels[target.dataset.method]}`, "info");
      });

      // Payment process simulation
      payButton.addEventListener("click", async () => {
        const activePlan = document.querySelector(".plan-card.active");
        const activeMethod = document.querySelector(".method.active");

        if (!activePlan || !activeMethod) {
          showToast("–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç –∏ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã", "warning");
          return;
        }

        const payload = {
          plan: activePlan?.dataset.plan,
          method: activeMethod?.dataset.method,
          amount: currencyFormat(Number(activePlan?.dataset.amount)),
        };

        // Disable button and show loading
        payButton.classList.add("loading");
        payButton.innerHTML = '<span class="spinner"></span> –û–±—Ä–∞–±–æ—Ç–∫–∞...';

        // Simulate payment process
        await new Promise((resolve) => setTimeout(resolve, 1500));

        updateProgress(66);

        orderStatus.classList.add("updating");
        orderStatus.textContent = "–û–ø–ª–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ ‚Äî –∂–¥—ë–º –∫–≤–∏—Ç–∞–Ω—Ü–∏—é";
        receiptNote.textContent =
          "–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —á–µ–∫ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É @gosuslugi_support_bot –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.";

        timelineSteps.forEach((step) => step.classList.remove("active"));
        const step2 = document.querySelector('.status-step[data-step="2"]');
        step2.classList.add("active");

        await new Promise((resolve) => setTimeout(resolve, 500));

        orderStatus.classList.remove("updating");
        payButton.classList.remove("loading");
        payButton.textContent = "–û–ø–ª–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞";

        showToast(
          `–ó–∞—è–≤–∫–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞! –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –≤ Telegram: @gosuslugi_support_bot`,
          "success"
        );

        // Reset button after 3 seconds
        setTimeout(() => {
          payButton.textContent = "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫ –æ–ø–ª–∞—Ç–µ";
        }, 3000);
      });

      // Nav interactions
      document.querySelectorAll("nav span").forEach((item) => {
        item.addEventListener("click", () => {
          showToast(`–ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª: ${item.textContent}`, "info");
        });
      });

      // Hero buttons
      document.querySelector(".primary-btn")?.addEventListener("click", () => {
        showToast("–ü–µ—Ä–µ—Ö–æ–¥ –≤ Telegram...", "info");
      });

      document.querySelector(".secondary-btn")?.addEventListener("click", () => {
        showToast("–û—Ç–∫—Ä—ã—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è", "info");
      });

      // Tab switching
      document.querySelectorAll(".tab").forEach((tab) => {
        tab.addEventListener("click", () => {
          document.querySelectorAll(".tab").forEach((t) => t.classList.remove("active"));
          tab.classList.add("active");
          showToast(`–†–µ–∂–∏–º: ${tab.textContent}`, "info");
        });
      });

      // Status step click
      timelineSteps.forEach((step) => {
        step.addEventListener("click", () => {
          const stepNum = step.dataset.step;
          showToast(`–≠—Ç–∞–ø ${stepNum}: ${step.querySelector("strong").textContent}`, "info");
        });
      });

      // Live time update
      function updateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString("ru-RU", {
          hour: "2-digit",
          minute: "2-digit",
        });
        const timeElement = document.getElementById("liveTime");
        if (timeElement) {
          timeElement.textContent = timeString;
        }
      }

      // Add live time to header if needed
      const topbar = document.querySelector(".topbar");
      if (topbar && !document.getElementById("liveTime")) {
        const timeDiv = document.createElement("div");
        timeDiv.id = "liveTime";
        timeDiv.style.cssText = "font-size: 14px; color: #6b7287;";
        topbar.appendChild(timeDiv);
        updateTime();
        setInterval(updateTime, 1000);
      }

      // Scroll animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = "1";
            entry.target.style.transform = "translateY(0)";
          }
        });
      }, observerOptions);

      document.querySelectorAll(".order-card, .status-step, .plan-card, .method").forEach((el) => {
        observer.observe(el);
      });

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
      if (window.Telegram?.WebApp) {
        const tg = window.Telegram.WebApp;
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ Web App
        tg.ready();
        
        // –†–æ–∑–≥–æ—Ä—Ç–∞—î–º–æ –Ω–∞ –≤–µ—Å—å –µ–∫—Ä–∞–Ω
        tg.expand();
        
        // –í–∏–º–∫–Ω—É—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—é—á—ñ –∫–æ–ª—å–æ—Ä–∏ Telegram —Ç–µ–º–∏
        tg.setHeaderColor('#ffffff');
        tg.setBackgroundColor('#f3f6fb');
        
        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
        // –í–∏–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä—ñ–≤ —Ç–µ–º–∏
        if (tg.colorScheme) {
          // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Å–≤—ñ—Ç–ª—É —Ç–µ–º—É –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å Telegram
          document.documentElement.style.setProperty('--tg-theme-bg-color', '#f3f6fb');
          document.documentElement.style.setProperty('--tg-theme-text-color', '#181f2f');
          document.documentElement.style.setProperty('--tg-theme-hint-color', '#6b7287');
          document.documentElement.style.setProperty('--tg-theme-link-color', '#0b63ce');
          document.documentElement.style.setProperty('--tg-theme-button-color', '#0b63ce');
          document.documentElement.style.setProperty('--tg-theme-button-text-color', '#ffffff');
        }
        
        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
        if (tg.BackButton) {
          tg.BackButton.show();
          tg.BackButton.onClick(() => {
            tg.close();
          });
        }
        
        // –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è viewport –¥–ª—è Telegram WebView
        const viewport = document.querySelector('meta[name="viewport"]');
        if (viewport) {
          viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover');
        }
        
        // –î–æ–¥–∞—î–º–æ –∫–ª–∞—Å –¥–ª—è —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó –≤ Telegram
        document.body.classList.add('telegram-webview');
        
        console.log('‚úÖ Telegram Web App initialized');
      }

    </script>
</body>
</html>

